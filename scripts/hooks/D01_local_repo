#!/bin/bash
#
# this hook enables our local repo inside the build chroot
#

echo "=== $0: adding local repo to apt-sources: $APT_REPO"

APT_REPO_URL="file://$APT_REPO"

for i in repo.pub local-repo.pub ; do
	if [ -f "$APT_REPO/$i" ]; then
		echo "Enabling repo key: $i"
		apt-key add "$APT_REPO/$i"
	fi
done

echo "=== APT REPO: $APT_REPO"

ls -la $APT_REPO

echo "=== apt-components: $APT_COMPONENTS"

( \
    echo "# autogenerated by wksp" ; \
    echo "deb $APT_REPO_URL $APT_DIST $APT_COMPONENTS" ; \
) >> /etc/apt/sources.list

echo "=== adding openjdk8 ppa pubkey"

apt-key add - <<EOF
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: SKS 1.1.6
Comment: Hostname: keyserver.ubuntu.com

mI0ES8OmlQEEALy8ttT3KgmjoqCkeU7S04/j615RDivV0CHv+5mdJFQY10wo6v6krmXxK757
eIoRDN1B3ztl8vjqLHxi8oA+f4inZcrrIZYjW0MghO+IcKEbKCrPUPjDfQBSIvZD5ZaiibMN
wZJ6TidS2r6nSAH+aoMRgXYycQPGkAHDcaPKY54zABEBAAG0JExhdW5jaHBhZCBPcGVuSkRL
IGJ1aWxkcyAoYWxsIGFyY2hzKYi2BBMBAgAgBQJLw6aVAhsDBgsJCAcDAgQVAggDBBYCAwEC
HgECF4AACgkQ65sdiIb0TiraSgQAr+WD+qGcW5yrkS2QBMq+g+Ew2tLqeDLw8Y2xZ4BhnRzB
3WljBfwj7wt/KOugjJWaEWuYGiuLBf6vy+At5VtXs0FSk6oIZR0XZvUVamFPXeTkZqUiw4oT
NlBTeOhAxrevRWznmLuRAIWlr0dARJyLCK5MMVVhesouoG8WpOrniXs=
=7ooG
-----END PGP PUBLIC KEY BLOCK-----
EOF

echo "=== adding ubuntu-extras pubkey"

apt-key add - <<EOF
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1

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
oD2o6AHGpBbw0KsIHqz5
=TOD5
-----END PGP PUBLIC KEY BLOCK-----
EOF

apt-get update

exit 0
